<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Starter Page - Eventix Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <style>
    :root{
      --card:#ffffffcc; --border:#1b1f2a22; --text:#1b1f2a; --muted:#556;
      --ok:#1f8f4a; --bad:#c03535; --accent:#2f6fed;
      --shadow: 0 10px 30px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    header h1{margin:0; font-size:18px}
    header p{margin:6px 0 0; opacity:.85; font-size:13px; line-height:1.35}
    .wrap{
      display:grid;
      grid-template-columns: 320px 1fr;
      gap:14px;
      padding:14px;
      min-height: calc(100vh - 74px);
    }
    .panel{
      background: rgba(255,255,255,.06);
      border: 1px solid rgb(43 43 43);
    border-radius: 20px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .panel .head{
      padding:12px 12px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      color:#000;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .badge{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(47,111,237,.25);
      border:1px solid rgba(47,111,237,.35);
      color:#000;
      white-space:nowrap;
    }
    .panel .content{
      padding:12px;
      color:#000;
    }
    .panel .content h3{margin:0 0 8px; font-size:14px}
    .panel .content p{margin:0 0 10px; font-size:13px; opacity:.92; line-height:1.45}
    .hint{
      margin-top:10px;
      padding:10px 10px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 12px;
      font-size:13px;
      line-height:1.45;
    }
    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    button{
      appearance:none;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.10);
      color:#000;
      padding:9px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight:600;
      font-size:13px;
    }
    button:hover{background: rgba(255,255,255,.14)}
    button.primary{
      background: rgba(47,111,237,.35);
      border-color: rgba(47,111,237,.50);
    }
    button.primary:hover{background: rgba(47,111,237,.42)}
    button.danger{
      background: rgba(192,53,53,.25);
      border-color: rgba(192,53,53,.40);
    }
    button.green{
      background: rgba(112, 226, 102, 0.25);
      border-color: rgba(43, 133, 58, 0.4);
    }

    /* Stage */
    .stage{
      border-radius: 16px;
      overflow:hidden;
      background: #000;
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      min-height: 520px;
      position:relative;
    }
    .stageBg{
      position:absolute; inset:0;
      transition: background .35s ease;
    }
    /* ===== –ú–£–õ–¨–¢–Ø–®–ù–´–ô –§–û–ù–î–ê–† (”ô—Ä –∫–µ–∑–µ“£–≥–µ) ===== */
    .stageBg.bg-1{ background: #e8e6f3 }
    .stageBg.bg-2{ background: linear-gradient(#ffecec,#ffffff); }
    .stageBg.bg-3{ background: linear-gradient(#fff1e6,#ffffff); }
    .stageBg.bg-4{ background: linear-gradient(#efe9ff,#ffffff); }
    .stageBg.bg-5{ background: linear-gradient(#ffe6f2,#ffffff); }
    .stageBg.bg-6{ background: linear-gradient(#e6fff5,#ffffff); }

    /* –ñ–æ“ì–∞—Ä“ì—ã ‚Äú—Ç–∞“õ—ã—Ä—ã–ø-–±–∞–Ω–Ω–µ—Ä‚Äù */
    .stageBg::after{
      content:"";
      position:absolute; top:16px; left:18px;
      font-size:26px;
      opacity:.7;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(0,0,0,.08);
      border-radius: 999px;
      padding: 8px 14px;
      backdrop-filter: blur(8px);
    }
    .stageBg.bg-1::after{ content:"üçé –ê—Å “õ–æ—Ä—ã—Ç—É ‚Üí –≥–ª—é–∫–æ–∑–∞"; }
    .stageBg.bg-2::after{ content:"ü©∏ “ö–∞–Ω –∞—Ä“õ—ã–ª—ã —Ç–∞—Å—ã–º–∞–ª"; }
    .stageBg.bg-3::after{ content:"üß° –ë–∞—É—ã—Ä –∂–∞—Å—É—à–∞—Å—ã"; }
    .stageBg.bg-4::after{ content:"üß¨ –ì–ª–∏–∫–æ–≥–µ–Ω —Å–∏–Ω—Ç–µ–∑—ñ"; }
    .stageBg.bg-5::after{ content:"üåø –¢–∞—Ä–º–∞“õ—Ç–∞–ª—É"; }
    .stageBg.bg-6::after{ content:"üèÉ –≠–Ω–µ—Ä–≥–∏—è “õ–æ–ª–¥–∞–Ω—É"; }

    /* –ñ–µ“£—ñ–ª ‚Äú“õ–∞–ª“õ—ã–º–∞–ª—ã —à–∞—Ä–ª–∞—Ä‚Äù */
    .bubbles{
      position:absolute; inset:0;
      pointer-events:none;
      overflow:hidden;
    }
    .bubble{
      position:absolute;
      width:18px; height:18px;
      border-radius:999px;
      background: rgba(47,111,237,.18);
      animation: floatUp 7.5s linear infinite;
      filter: blur(.1px);
    }
    .bubble:nth-child(2){left:18%; animation-duration:9s; width:14px; height:14px; background: rgba(31,143,74,.18)}
    .bubble:nth-child(3){left:32%; animation-duration:8.4s; width:22px; height:22px; background: rgba(255,77,166,.14)}
    .bubble:nth-child(4){left:55%; animation-duration:10.2s; width:12px; height:12px}
    .bubble:nth-child(5){left:73%; animation-duration:8.8s; width:20px; height:20px; background: rgba(31,143,74,.14)}
    .bubble:nth-child(6){left:86%; animation-duration:9.6s; width:16px; height:16px; background: rgba(255,77,166,.12)}
    @keyframes floatUp{
      0%{ transform: translateY(110%); opacity:.0 }
      10%{ opacity:.35 }
      100%{ transform: translateY(-30%); opacity:0 }
    }

    .stageInner{
      position:relative;
      padding:16px;
      min-height: 520px;
      display:grid;
      grid-template-columns: 1fr 340px;
      gap:14px;
    }

    .board{
      background: var(--card);
      border:1px solid var(--border);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(8px);
    }
    .board .bhead{
      padding:12px 12px 10px;
      border-bottom:1px solid var(--border);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .board .bhead .title{
      display:flex; flex-direction:column; gap:3px;
    }
    .board .bhead .title strong{font-size:14px}
    .board .bhead .title span{font-size:12px; color:var(--muted)}
    .board .bbody{padding:12px}

    .zones{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .zone{
      border:2px dashed rgba(47,111,237,.25);
      background: rgba(47,111,237,.06);
      border-radius: 14px;
      padding:12px;
      min-height: 82px;
      display:flex;
      flex-direction:column;
      gap:6px;
      justify-content:center;
      position:relative;
      transition: transform .12s ease;
    }
    .zone:hover{ transform: translateY(-1px); }
    .zone.ok{
      border-color: rgba(31,143,74,.35);
      background: rgba(31,143,74,.08);
    }
    .zone.bad{
      border-color: rgba(192,53,53,.40);
      background: rgba(192,53,53,.08);
    }
    .zone small{color:var(--muted)}
    .zone .slot{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-top:4px;
      min-height: 34px;
    }

    /* Tray */
    .tray{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .trayCard{
      background: var(--card);
      border:1px solid var(--border);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(8px);
    }
    .trayCard .bhead{
      padding:12px 12px 10px;
      border-bottom:1px solid var(--border);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .trayCard .bhead strong{font-size:14px}
    .trayCard .bbody{padding:12px}
    .items{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
    }
    .item{
      user-select:none;
      padding:10px 10px;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.90);
      box-shadow: 0 6px 18px rgba(0,0,0,.06);
      cursor:grab;
      min-width: 120px;
      display:flex;
      flex-direction:column;
      gap:2px;
      transition: transform .12s ease;
    }
    .item:hover{ transform: translateY(-1px); }
    .item:active{cursor:grabbing}
    .item b{font-size:13px}
    .item span{font-size:12px; color:var(--muted)}
    .item[data-kind="enzyme"]{border-color: rgba(47,111,237,.25)}
    .item[data-kind="substrate"]{border-color: rgba(31,143,74,.25)}
    .item[data-kind="energy"]{border-color: rgba(192,53,53,.20)}
    .ghost{ opacity:.45; transform: scale(.98); }

    /* ‚Äú–¢—ñ—Ä—ñ‚Äù –∞–Ω–∏–º–∞—Ü–∏—è: –∫–∞—Ä—Ç–æ—á–∫–∞ drop –±–æ–ª“ì–∞–Ω–¥–∞ “õ—ã—Å“õ–∞ ‚Äúpop‚Äù */
    .pop{
      animation: pop .18s ease-out;
    }
    @keyframes pop{
      from{ transform: scale(.98); }
      to{ transform: scale(1); }
    }

    .msg{
      margin-top:10px;
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.78);
      line-height:1.45;
      font-size:13px;
    }
    .msg.ok{border-color: rgba(31,143,74,.35)}
    .msg.bad{border-color: rgba(192,53,53,.40)}
    .kpi{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:10px;
    }
    .pill{
      font-size:12px;
      padding:7px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.65);
      color:#111;
    }
    .footerNote{
      margin-top:10px;
      font-size:12px;
      color: #000;
      line-height:1.45;
      opacity:.95;
    }

    @media (max-width: 980px){
      .wrap{grid-template-columns: 1fr}
      .stageInner{grid-template-columns: 1fr}
    }
  </style>
  <!-- =======================================================
  * Template Name: Eventix
  * Template URL: https://bootstrapmade.com/eventix-bootstrap-events-website-template/
  * Updated: Sep 06 2025 with Bootstrap v5.3.8
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="starter-page-page">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="header-container container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
        <h1 class="sitename">E-Learning</h1>
    </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="index.html" class="active">–ë–∞—Å—Ç—ã –±–µ—Ç</a></li>
          <li><a href="#about">–ì–∏–∫–æ–≥–µ–Ω–µ–∑ –∞–Ω–∏–º–∞—Ü–∏—è—Å—ã</a></li>
          <li><a href="starter-page.html">–°–∏–º—É–ª—è—Ü–∏—è –∂–∞—Å–∞—É</a></li>
          <li><a href="privacy.html">–ë—ñ–ª—ñ–º—ñ“£–¥—ñ —Ç–µ–∫—Å–µ—Ä</a></li>
          <li><a href="#speakers">–ê–≤—Ç–æ—Ä–ª–∞—Ä</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <a class="btn-getstarted" href="contact.html">–ö–µ—Ä—ñ –±–∞–π–ª–∞–Ω—ã—Å</a>
  
    </div>
  </header>

  <main class="main">

    <!-- Starter Section Section -->
    <section id="starter-section" class="starter-section section">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <h2>–ì–ª–∏–∫–æ–≥–µ–Ω–µ–∑ —Å–∏–º—É–ª—è—Ü–∏—è—Å—ã</h2>
        <p>–û“õ—É—à—ã –¥“±—Ä—ã—Å –∫–µ–∑–µ–∫—Ç—ñ–ª—ñ–∫–ø–µ–Ω –º–æ–ª–µ–∫—É–ª–∞–ª–∞—Ä –º–µ–Ω —Ñ–µ—Ä–º–µ–Ω—Ç—Ç–µ—Ä–¥—ñ –∞–π–º–∞“õ—Ç–∞—Ä“ì–∞ —Å“Ø–π—Ä–µ–ø –∞–ø–∞—Ä–∞–¥—ã (Drag & Drop).</p>
      </div><!-- End Section Title -->

      <div class="container" data-aos="fade-up">
        <div class="wrap">
    <!-- Left panel -->
    <section class="panel" aria-label="–ù“±—Å“õ–∞—É–ª—ã“õ" style="padding-top: 15px !important;">
      <div class="head">
        <div>–ù“±—Å“õ–∞—É–ª—ã“õ</div>
        <div class="badge" id="stepBadge">–ö–µ–∑–µ“£ 1 / 6</div>
      </div>
      <div class="content">
        <h3 id="stepTitle">1) –§–æ—Å—Ñ–æ—Ä–ª–∞–Ω—É</h3>
        <p id="stepGoal">–ì–ª—é–∫–æ–∑–∞–Ω—ã —Ñ–æ—Å—Ñ–æ—Ä–ª–∞–Ω–¥—ã—Ä—ã–ø, –≥–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç (G6P) —Ç“Ø–∑.</p>

        <div class="hint" id="stepTheory">
          <b>“í—ã–ª—ã–º–∏ –Ω–µ–≥—ñ–∑:</b> –ì–ª—é–∫–æ–∑–∞ –≥–µ–∫—Å–æ–∫–∏–Ω–∞–∑–∞ –∞—Ä“õ—ã–ª—ã (–±–∞—É—ã—Ä–¥–∞ ‚Äî –≥–ª—é–∫–æ–∫–∏–Ω–∞–∑–∞) —Ñ–æ—Å—Ñ–æ—Ä–ª–∞–Ω–∞–¥—ã.
        </div>

        <div class="kpi">
          <div class="pill">–î“±—Ä—ã—Å: <b id="okCount">0</b></div>
          <div class="pill">“ö–∞—Ç–µ: <b id="badCount">0</b></div>
          <div class="pill">“∞–ø–∞–π: <b id="score">0</b></div>
        </div>

        <div class="row">
          <button class="primary" id="btnCheck">–¢–µ–∫—Å–µ—Ä—É</button>
          <button class="green" id="btnNext">–ö–µ–ª–µ—Å—ñ –∫–µ–∑–µ“£</button>
          <button class="danger" id="btnReset">“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É</button>
        </div>

        <div class="footerNote">
          –ö–µ“£–µ—Å: ”ô—Ä –∫–µ–∑–µ“£–¥–µ –æ“£ –∂–∞“õ—Ç–∞“ì—ã ¬´–≠–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä–¥–µ–Ω¬ª “õ–∞–∂–µ—Ç—Ç—ñ –º–æ–ª–µ–∫—É–ª–∞/—Ñ–µ—Ä–º–µ–Ω—Ç—Ç—ñ –∞–ª—ã–ø,
          —Å–æ–ª –∂–∞“õ—Ç–∞“ì—ã ¬´–†–µ–∞–∫—Ü–∏—è –∞–π–º–∞“ì—ã–Ω–∞¬ª –∞–ø–∞—Ä—ã–ø —Ç–∞—Å—Ç–∞“£—ã–∑. –ê—Ä—Ç—ã“õ —ç–ª–µ–º–µ–Ω—Ç—Ç—ñ –±–∞—Å—ã–ø ”©—à—ñ—Ä—É–≥–µ –±–æ–ª–∞–¥—ã.
        </div>
      </div>
    </section>

    <!-- Stage -->
    <main class="stage" aria-label="–°–∏–º—É–ª—è—Ü–∏—è">
      <div class="stageBg bg-1" id="stageBg"></div>
      <div class="bubbles" aria-hidden="true">
        <div class="bubble" style="left:8%; bottom:-30px;"></div>
        <div class="bubble" style="left:18%; bottom:-40px;"></div>
        <div class="bubble" style="left:32%; bottom:-35px;"></div>
        <div class="bubble" style="left:55%; bottom:-50px;"></div>
        <div class="bubble" style="left:73%; bottom:-45px;"></div>
        <div class="bubble" style="left:86%; bottom:-38px;"></div>
      </div>

      <div class="stageInner">
        <!-- Board -->
        <div class="board" role="region" aria-label="–†–µ–∞–∫—Ü–∏—è –∞–π–º–∞“ì—ã">
          <div class="bhead">
            <div class="title">
              <strong id="boardTitle">–ö–µ–∑–µ“£ 1: –§–æ—Å—Ñ–æ—Ä–ª–∞–Ω—É</strong>
              <span id="boardSubtitle">–ì–ª—é–∫–æ–∑–∞ ‚Üí –ì–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç (G6P)</span>
            </div>
            <span class="badge" id="reactionBadge">–ñ–∏–Ω–∞–ª–º–∞–¥—ã</span>
          </div>

          <div class="bbody">
            <div class="zones" id="zones"></div>

            <div class="msg" id="feedback">
              –≠–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä–¥—ñ —Å“Ø–π—Ä–µ–ø –∞–ø–∞—Ä—ã–ø, —Ä–µ–∞–∫—Ü–∏—è–Ω—ã “õ“±—Ä–∞—Å—Ç—ã—Ä—ã“£—ã–∑. –î–∞–π—ã–Ω –±–æ–ª—Å–∞“£—ã–∑ ‚Äî ¬´–¢–µ–∫—Å–µ—Ä—É¬ª.
            </div>
          </div>
        </div>

        <!-- Right tray -->
        <div class="tray">
          <div class="trayCard" role="region" aria-label="–≠–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä">
            <div class="bhead">
              <strong>–≠–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä</strong>
              <span class="badge">Drag & Drop</span>
            </div>
            <div class="bbody">
              <div class="items" id="items"></div>
              <div style="margin-top:10px; font-size:12px; color:var(--muted); line-height:1.45;">
                –ï—Å–∫–µ—Ä—Ç—É: –ö–µ–π–±—ñ—Ä —ç–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä –∫–µ–ª–µ—Å—ñ –∫–µ–∑–µ“£–¥–µ—Ä–¥–µ “ì–∞–Ω–∞ –∫–µ—Ä–µ–∫ –±–æ–ª–∞–¥—ã.
              </div>
            </div>
          </div>

          <div class="trayCard" role="region" aria-label="–ù”ô—Ç–∏–∂–µ">
            <div class="bhead">
              <strong>–°—Ö–µ–º–∞</strong>
              <span class="badge" id="equationTag">‚Äî</span>
            </div>
            <div class="bbody" style="line-height:1.5; font-size:13px;">
              <b>–†–µ–∞–∫—Ü–∏—è —Ç–µ“£–¥–µ—É—ñ:</b>
              <div id="equation" style="margin-top:6px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;">
                ‚Äî
              </div>
              <div id="enzymeNote" style="margin-top:10px; font-size:12px; color:var(--muted); line-height:1.45;">
                ‚Äî
              </div>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

      </div>

    </section><!-- /Starter Section Section -->

  </main>


  <footer id="footer" class="footer position-relative light-background">
    <div class="container copyright text-center mt-4">
      <p>¬© <span>Copyright</span> <strong class="px-1 sitename">E-Learning</strong> <span>–ë–∞—Ä–ª—ã“õ “õ“±“õ—ã“õ—Ç–∞—Ä “õ–æ—Ä“ì–∞–ª“ì–∞–Ω</span></p>
      <div class="credits">
        Designed by <a href="https://kz.linkedin.com/in/asylsvanov">Assylzhan Svanov</a>
      </div>
    </div>

  </footer>
  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>

  <script>
/**
 * –ì–ª–∏–∫–æ–≥–µ–Ω–µ–∑ —Å–∏–º—É–ª—è—Ü–∏—è—Å—ã (1 —Ñ–∞–π–ª, offline).
 * Drag & Drop –∞—Ä“õ—ã–ª—ã –∫–µ–∑–µ“£-–∫–µ–∑–µ“£—ñ–º–µ–Ω –∂–∏–Ω–∞“õ—Ç–∞—É.
 * –ê—Ä—Ç—ã“õ —ç–ª–µ–º–µ–Ω—Ç: –∫–ª–æ–Ω–¥—ã –±–∞—Å—ã–ø ”©—à—ñ—Ä—É–≥–µ –±–æ–ª–∞–¥—ã.
 */

const ALL_ITEMS = [
  // metabolites
  { id:"glucose",   kind:"substrate", label:"–ì–ª—é–∫–æ–∑–∞",          desc:"C‚ÇÜH‚ÇÅ‚ÇÇO‚ÇÜ" },
  { id:"g6p",       kind:"substrate", label:"–ì–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç", desc:"G6P" },
  { id:"g1p",       kind:"substrate", label:"–ì–ª—é–∫–æ–∑–∞-1-—Ñ–æ—Å—Ñ–∞—Ç", desc:"G1P" },
  { id:"udpg",      kind:"substrate", label:"–£–î–§-–≥–ª—é–∫–æ–∑–∞",      desc:"UDP-Glc" },
  { id:"glycogen",  kind:"substrate", label:"–ì–ª–∏–∫–æ–≥–µ–Ω",         desc:"(Œ±1‚Üí4, Œ±1‚Üí6)" },
  { id:"primer",    kind:"substrate", label:"–ü—Ä–∞–π–º–µ—Ä (–≥–ª–∏–∫–æ–≥–µ–Ω–∏–Ω)", desc:"¬´–∑–∞—Ç—Ä–∞–≤–∫–∞¬ª" },

  // energy / nucleotides
  { id:"atp",       kind:"energy", label:"–ê–¢–§", desc:"ATP" },
  { id:"utp",       kind:"energy", label:"–£–¢–§", desc:"UTP" },
  { id:"udp",       kind:"energy", label:"–£–î–§", desc:"UDP" },
  { id:"ppi",       kind:"energy", label:"–ü–∏—Ä–æ—Ñ–æ—Å—Ñ–∞—Ç", desc:"PPi" },

  // enzymes
  { id:"hexokinase",  kind:"enzyme", label:"–ì–µ–∫—Å–æ–∫–∏–Ω–∞–∑–∞", desc:"(–∫”©–ø —Ç—ñ–Ω–¥–µ—Ä)" },
  { id:"glucokinase", kind:"enzyme", label:"–ì–ª—é–∫–æ–∫–∏–Ω–∞–∑–∞", desc:"(–±–∞—É—ã—Ä)" },
  { id:"pgm",         kind:"enzyme", label:"–§–æ—Å—Ñ–æ–≥–ª—é–∫–æ–º—É—Ç–∞–∑–∞", desc:"G6P ‚Üî G1P" },
  { id:"udpgppase",   kind:"enzyme", label:"UDP-Glc –ø–∏—Ä–æ—Ñ–æ—Å—Ñ–æ—Ä–∏–ª–∞–∑–∞", desc:"G1P+UTP‚ÜíUDP-Glc" },
  { id:"glySynthase", kind:"enzyme", label:"–ì–ª–∏–∫–æ–≥–µ–Ω—Å–∏–Ω—Ç–∞–∑–∞", desc:"Œ±-1,4" },
  { id:"branchEnz",   kind:"enzyme", label:"–¢–∞—Ä–º–∞“õ—Ç–∞—É—à—ã —Ñ–µ—Ä–º–µ–Ω—Ç", desc:"Œ±-1,6" },
];

const STEPS = [
  {
    id: 1,
    title: "1) –§–æ—Å—Ñ–æ—Ä–ª–∞–Ω—É",
    boardTitle: "–ö–µ–∑–µ“£ 1: –§–æ—Å—Ñ–æ—Ä–ª–∞–Ω—É",
    subtitle: "–ì–ª—é–∫–æ–∑–∞ ‚Üí –ì–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç (G6P)",
    goal: "–ì–ª—é–∫–æ–∑–∞–Ω—ã —Ñ–æ—Å—Ñ–æ—Ä–ª–∞–Ω–¥—ã—Ä—ã–ø, –≥–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç (G6P) —Ç“Ø–∑.",
    theory: "–ì–ª—é–∫–æ–∑–∞ –≥–µ–∫—Å–æ–∫–∏–Ω–∞–∑–∞ –∞—Ä“õ—ã–ª—ã (–±–∞—É—ã—Ä–¥–∞ ‚Äî –≥–ª—é–∫–æ–∫–∏–Ω–∞–∑–∞) —Ñ–æ—Å—Ñ–æ—Ä–ª–∞–Ω–∞–¥—ã. –≠–Ω–µ—Ä–≥–∏—è –∫”©–∑—ñ ‚Äî –ê–¢–§.",
    equation: "–ì–ª—é–∫–æ–∑–∞ + –ê–¢–§ ‚Üí –ì–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç + –ê–î–§",
    enzymeNote: "–§–µ—Ä–º–µ–Ω—Ç: –≥–µ–∫—Å–æ–∫–∏–Ω–∞–∑–∞ (–∫”©–ø —Ç—ñ–Ω–¥–µ—Ä) –Ω–µ–º–µ—Å–µ –≥–ª—é–∫–æ–∫–∏–Ω–∞–∑–∞ (–±–∞—É—ã—Ä).",
    zones: [
      { id:"z_sub",    title:"–°—É–±—Å—Ç—Ä–∞—Ç", hint:"–ì–ª—é–∫–æ–∑–∞", accepts:["glucose"] },
      { id:"z_energy", title:"–≠–Ω–µ—Ä–≥–∏—è",  hint:"–ê–¢–§", accepts:["atp"] },
      { id:"z_enzyme", title:"–§–µ—Ä–º–µ–Ω—Ç",  hint:"–ì–µ–∫—Å–æ–∫–∏–Ω–∞–∑–∞ –Ω–µ–º–µ—Å–µ –≥–ª—é–∫–æ–∫–∏–Ω–∞–∑–∞", accepts:["hexokinase","glucokinase"] },
      { id:"z_prod",   title:"”®–Ω—ñ–º",     hint:"–ì–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç", accepts:["g6p"] },
    ]
  },
  {
    id: 2,
    title: "2) –ò–∑–æ–º–µ—Ä–ª–µ–Ω—É",
    boardTitle: "–ö–µ–∑–µ“£ 2: G6P ‚Üí G1P",
    subtitle: "–ì–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç ‚Üí –ì–ª—é–∫–æ–∑–∞-1-—Ñ–æ—Å—Ñ–∞—Ç",
    goal: "G6P-—Ç—ã G1P-“õ–∞ –∞–π–Ω–∞–ª–¥—ã—Ä.",
    theory: "–§–æ—Å—Ñ–æ–≥–ª—é–∫–æ–º—É—Ç–∞–∑–∞ –≥–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç—Ç—ã –≥–ª—é–∫–æ–∑–∞-1-—Ñ–æ—Å—Ñ–∞—Ç“õ–∞ –∞—É—ã—Å—Ç—ã—Ä–∞–¥—ã (—Ñ–æ—Å—Ñ–∞—Ç —Ç–æ–±—ã–Ω—ã“£ —ñ—à–∫—ñ –æ—Ä—ã–Ω –∞—É—ã—Å—Ç—ã—Ä—É—ã).",
    equation: "–ì–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç ‚áÑ –ì–ª—é–∫–æ–∑–∞-1-—Ñ–æ—Å—Ñ–∞—Ç",
    enzymeNote: "–§–µ—Ä–º–µ–Ω—Ç: —Ñ–æ—Å—Ñ–æ–≥–ª—é–∫–æ–º—É—Ç–∞–∑–∞.",
    zones: [
      { id:"z_sub",    title:"–°—É–±—Å—Ç—Ä–∞—Ç", hint:"–ì–ª—é–∫–æ–∑–∞-6-—Ñ–æ—Å—Ñ–∞—Ç (G6P)", accepts:["g6p"] },
      { id:"z_enzyme", title:"–§–µ—Ä–º–µ–Ω—Ç",  hint:"–§–æ—Å—Ñ–æ–≥–ª—é–∫–æ–º—É—Ç–∞–∑–∞", accepts:["pgm"] },
      { id:"z_prod",   title:"”®–Ω—ñ–º",     hint:"–ì–ª—é–∫–æ–∑–∞-1-—Ñ–æ—Å—Ñ–∞—Ç (G1P)", accepts:["g1p"] },
    ]
  },
  {
    id: 3,
    title: "3) –ë–µ–ª—Å–µ–Ω–¥—ñ—Ä—É (UDP-Glc)",
    boardTitle: "–ö–µ–∑–µ“£ 3: –£–î–§-–≥–ª—é–∫–æ–∑–∞ —Ç“Ø–∑—ñ–ª—É—ñ",
    subtitle: "G1P + UTP ‚Üí UDP-–≥–ª—é–∫–æ–∑–∞ + PPi",
    goal: "G1P-—Ç—ã UTP –∞—Ä“õ—ã–ª—ã –±–µ–ª—Å–µ–Ω–¥—ñ—Ä—ñ–ø, UDP-–≥–ª—é–∫–æ–∑–∞ –∂–∞—Å–∞.",
    theory: "–ì–ª—é–∫–æ–∑–∞-1-—Ñ–æ—Å—Ñ–∞—Ç UTP-–ø–µ–Ω ”ô—Ä–µ–∫–µ—Ç—Ç–µ—Å—ñ–ø UDP-–≥–ª—é–∫–æ–∑–∞ —Ç“Ø–∑–µ–¥—ñ, –ø–∏—Ä–æ—Ñ–æ—Å—Ñ–∞—Ç (PPi) –±”©–ª—ñ–Ω–µ–¥—ñ. –ö–∞—Ç–∞–ª–∏–∑–∞—Ç–æ—Ä ‚Äî UDP-–≥–ª—é–∫–æ–∑–∞ –ø–∏—Ä–æ—Ñ–æ—Å—Ñ–æ—Ä–∏–ª–∞–∑–∞.",
    equation: "–ì–ª—é–∫–æ–∑–∞-1-—Ñ–æ—Å—Ñ–∞—Ç + –£–¢–§ ‚áÑ –£–î–§-–≥–ª—é–∫–æ–∑–∞ + PPi",
    enzymeNote: "–§–µ—Ä–º–µ–Ω—Ç: UDP-–≥–ª—é–∫–æ–∑–∞ –ø–∏—Ä–æ—Ñ–æ—Å—Ñ–æ—Ä–∏–ª–∞–∑–∞ (UDPG pyrophosphorylase).",
    zones: [
      { id:"z_sub",    title:"–°—É–±—Å—Ç—Ä–∞—Ç",   hint:"–ì–ª—é–∫–æ–∑–∞-1-—Ñ–æ—Å—Ñ–∞—Ç (G1P)", accepts:["g1p"] },
      { id:"z_energy", title:"–ö–æ—Ñ–∞–∫—Ç–æ—Ä",   hint:"–£–¢–§ (UTP)", accepts:["utp"] },
      { id:"z_enzyme", title:"–§–µ—Ä–º–µ–Ω—Ç",    hint:"UDP-–≥–ª—é–∫–æ–∑–∞ –ø–∏—Ä–æ—Ñ–æ—Å—Ñ–æ—Ä–∏–ª–∞–∑–∞", accepts:["udpgppase"] },
      { id:"z_prod",   title:"”®–Ω—ñ–º",       hint:"–£–î–§-–≥–ª—é–∫–æ–∑–∞", accepts:["udpg"] },
      { id:"z_by",     title:"–ñ–∞–Ω–∞–º–∞ ”©–Ω—ñ–º",hint:"–ü–∏—Ä–æ—Ñ–æ—Å—Ñ–∞—Ç (PPi)", accepts:["ppi"] },
    ]
  },
  {
    id: 4,
    title: "4) “∞–∑–∞—Ä—É (Œ±-1,4)",
    boardTitle: "–ö–µ–∑–µ“£ 4: –¢—ñ–∑–±–µ–∫—Ç—ñ“£ “±–∑–∞—Ä—É—ã",
    subtitle: "UDP-–≥–ª—é–∫–æ–∑–∞ ‚Üí –≥–ª–∏–∫–æ–≥–µ–Ω–≥–µ “õ–æ—Å—ã–ª–∞–¥—ã (Œ±-1,4)",
    goal: "UDP-–≥–ª—é–∫–æ–∑–∞–¥–∞–Ω –≥–ª—é–∫–æ–∑–∞ “õ–∞–ª–¥—ã“ì—ã–Ω –≥–ª–∏–∫–æ–≥–µ–Ω —Ç—ñ–∑–±–µ–≥—ñ–Ω–µ “õ–æ—Å.",
    theory: "–ì–ª–∏–∫–æ–≥–µ–Ω—Å–∏–Ω—Ç–∞–∑–∞ UDP-–≥–ª—é–∫–æ–∑–∞–¥–∞–Ω –≥–ª—é–∫–æ–∑–∞–Ω—ã ”©—Å—ñ–ø —Ç“±—Ä“ì–∞–Ω —Ç—ñ–∑–±–µ–∫–∫–µ –∫”©—à—ñ—Ä–µ–¥—ñ –¥–µ Œ±-(1‚Üí4) –±–∞–π–ª–∞–Ω—ã—Å—ã–Ω —Ç“Ø–∑–µ–¥—ñ. –†–µ–∞–∫—Ü–∏—è –ø—Ä–∞–π–º–µ—Ä (–≥–ª–∏–∫–æ–≥–µ–Ω–∏–Ω/“õ—ã—Å“õ–∞ —Ç—ñ–∑–±–µ–∫) –±–æ–ª“ì–∞–Ω–¥–∞ –∂“Ø—Ä–µ–¥—ñ.",
    equation: "–£–î–§-–≥–ª—é–∫–æ–∑–∞ + (–ì–ª–∏–∫–æ–≥–µ–Ω)n ‚Üí (–ì–ª–∏–∫–æ–≥–µ–Ω)n+1 + –£–î–§",
    enzymeNote: "–§–µ—Ä–º–µ–Ω—Ç: –≥–ª–∏–∫–æ–≥–µ–Ω—Å–∏–Ω—Ç–∞–∑–∞. –®–∞—Ä—Ç: –ø—Ä–∞–π–º–µ—Ä (–≥–ª–∏–∫–æ–≥–µ–Ω–∏–Ω) –±–∞—Ä –±–æ–ª—É—ã –∫–µ—Ä–µ–∫.",
    zones: [
      { id:"z_sub",    title:"–î–æ–Ω–æ—Ä",     hint:"–£–î–§-–≥–ª—é–∫–æ–∑–∞", accepts:["udpg"] },
      { id:"z_primer", title:"–ü—Ä–∞–π–º–µ—Ä",   hint:"–ì–ª–∏–∫–æ–≥–µ–Ω–∏–Ω/¬´–∑–∞—Ç—Ä–∞–≤–∫–∞¬ª", accepts:["primer"] },
      { id:"z_enzyme", title:"–§–µ—Ä–º–µ–Ω—Ç",   hint:"–ì–ª–∏–∫–æ–≥–µ–Ω—Å–∏–Ω—Ç–∞–∑–∞", accepts:["glySynthase"] },
      { id:"z_prod",   title:"”®–Ω—ñ–º",      hint:"–ì–ª–∏–∫–æ–≥–µ–Ω (“±–∑–∞—Ä“ì–∞–Ω)", accepts:["glycogen"] },
      { id:"z_by",     title:"–ñ–∞–Ω–∞–º–∞ ”©–Ω—ñ–º",hint:"–£–î–§", accepts:["udp"] },
    ]
  },
  {
    id: 5,
    title: "5) –¢–∞—Ä–º–∞“õ—Ç–∞–ª—É (Œ±-1,6)",
    boardTitle: "–ö–µ–∑–µ“£ 5: –¢–∞—Ä–º–∞“õ—Ç–∞–ª—É",
    subtitle: "Œ±-1,6 –±–∞–π–ª–∞–Ω—ã—Å ‚Äî –∂–∞“£–∞ –±“±—Ç–∞“õ",
    goal: "–ì–ª–∏–∫–æ–≥–µ–Ω–≥–µ —Ç–∞—Ä–º–∞“õ (Œ±-1,6) “õ–æ—Å—É–¥—ã –∫”©—Ä—Å–µ—Ç.",
    theory: "–¢–∞—Ä–º–∞“õ—Ç–∞—É—à—ã —Ñ–µ—Ä–º–µ–Ω—Ç –æ–ª–∏–≥–æ—Å–∞—Ö–∞—Ä–∏–¥ –±”©–ª—ñ–≥—ñ–Ω —Ç–∞—Å—ã–º–∞–ª–¥–∞–ø, Œ±-1,6 –±–∞–π–ª–∞–Ω—ã—Å—ã –∞—Ä“õ—ã–ª—ã –∂–∞“£–∞ –±“±—Ç–∞“õ –∂–∞—Å–∞–π–¥—ã. –¢–∞—Ä–º–∞“õ—Ç–∞–ª—É –µ—Ä—ñ–≥—ñ—à—Ç—ñ–∫—Ç—ñ –∂”ô–Ω–µ —Å–∏–Ω—Ç–µ–∑/—ã–¥—ã—Ä–∞—É –∂—ã–ª–¥–∞–º–¥—ã“ì—ã–Ω –∞—Ä—Ç—Ç—ã—Ä–∞–¥—ã.",
    equation: "–¢—ñ–∑–±–µ–∫ ‚Üí –¢–∞—Ä–º–∞“õ—Ç–∞–ª“ì–∞–Ω –≥–ª–∏–∫–æ–≥–µ–Ω  (Œ±-1,6)",
    enzymeNote: "–§–µ—Ä–º–µ–Ω—Ç: —Ç–∞—Ä–º–∞“õ—Ç–∞—É—à—ã —Ñ–µ—Ä–º–µ–Ω—Ç (branching enzyme).",
    zones: [
      { id:"z_sub",    title:"–ù–µ–≥—ñ–∑–≥—ñ —Ç—ñ–∑–±–µ–∫", hint:"–ì–ª–∏–∫–æ–≥–µ–Ω", accepts:["glycogen"] },
      { id:"z_enzyme", title:"–§–µ—Ä–º–µ–Ω—Ç",        hint:"–¢–∞—Ä–º–∞“õ—Ç–∞—É—à—ã —Ñ–µ—Ä–º–µ–Ω—Ç", accepts:["branchEnz"] },
      { id:"z_prod",   title:"–ù”ô—Ç–∏–∂–µ",         hint:"–¢–∞—Ä–º–∞“õ—Ç–∞–ª“ì–∞–Ω –≥–ª–∏–∫–æ–≥–µ–Ω", accepts:["glycogen"] },
    ]
  },
  {
    id: 6,
    title: "6) “ö–æ—Ä—ã—Ç—ã–Ω–¥—ã",
    boardTitle: "–ö–µ–∑–µ“£ 6: –≠–Ω–µ—Ä–≥–∏—è “õ–æ–ª–¥–∞–Ω—É",
    subtitle: "–ì–ª–∏–∫–æ–≥–µ–Ω ‚Äî —ç–Ω–µ—Ä–≥–∏—è “õ–æ—Ä—ã (“õ–∞–∂–µ—Ç –∫–µ–∑–¥–µ —ã–¥—ã—Ä–∞–π–¥—ã)",
    goal: "–ì–ª–∏–∫–æ–≥–µ–Ω –Ω–µ “Ø—à—ñ–Ω –∂–∏–Ω–∞–ª–∞—Ç—ã–Ω—ã–Ω “õ–æ—Ä—ã—Ç—ã–Ω–¥—ã–ª–∞.",
    theory: "“ö–æ–∑“ì–∞–ª—ã—Å/–∞—à—ã“ì—É –∫–µ–∑—ñ–Ω–¥–µ –≥–ª–∏–∫–æ–≥–µ–Ω–Ω–µ–Ω –≥–ª—é–∫–æ–∑–∞ –∞–ª—ã–Ω–∞–¥—ã (–≥–ª–∏–∫–æ–≥–µ–Ω–æ–ª–∏–∑). –ë“±–ª —Å–∏–º—É–ª—è—Ü–∏—è –≥–ª–∏–∫–æ–≥–µ–Ω–µ–∑–¥—ñ“£ –Ω–µ–≥—ñ–∑–≥—ñ —Å–∞—Ç—ã–ª–∞—Ä—ã–Ω –±–µ–∫—ñ—Ç–µ–¥—ñ.",
    equation: "–ì–ª–∏–∫–æ–≥–µ–Ω ‚Üí –ì–ª—é–∫–æ–∑–∞ (“õ–∞–∂–µ—Ç –∫–µ–∑–¥–µ, –≥–ª–∏–∫–æ–≥–µ–Ω–æ–ª–∏–∑)",
    enzymeNote: "–ë“±–ª –∫–µ–∑–µ“£ ‚Äî “õ–æ—Ä—ã—Ç—ã–Ω–¥—ã. –°—ñ–∑ –±–∞—Ä–ª—ã“õ –Ω–µ–≥—ñ–∑–≥—ñ —Å–∞—Ç—ã–ª–∞—Ä–¥—ã –æ—Ä—ã–Ω–¥–∞–¥—ã“£—ã–∑.",
    zones: [
      { id:"z_conc", title:"“ö–æ—Ä—ã—Ç—ã–Ω–¥—ã", hint:"–ì–ª–∏–∫–æ–≥–µ–Ω ‚Äî —ç–Ω–µ—Ä–≥–∏—è “õ–æ—Ä—ã", accepts:["glycogen"] },
    ]
  }
];

let stepIndex = 0;
let okCount = 0;
let badCount = 0;
let score = 0;

const els = {
  stepBadge: document.getElementById("stepBadge"),
  stepTitle: document.getElementById("stepTitle"),
  stepGoal: document.getElementById("stepGoal"),
  stepTheory: document.getElementById("stepTheory"),
  boardTitle: document.getElementById("boardTitle"),
  boardSubtitle: document.getElementById("boardSubtitle"),
  reactionBadge: document.getElementById("reactionBadge"),
  zones: document.getElementById("zones"),
  items: document.getElementById("items"),
  feedback: document.getElementById("feedback"),
  stageBg: document.getElementById("stageBg"),
  okCount: document.getElementById("okCount"),
  badCount: document.getElementById("badCount"),
  score: document.getElementById("score"),
  equation: document.getElementById("equation"),
  equationTag: document.getElementById("equationTag"),
  enzymeNote: document.getElementById("enzymeNote"),
};

const btnCheck = document.getElementById("btnCheck");
const btnNext  = document.getElementById("btnNext");
const btnReset = document.getElementById("btnReset");

function renderItemsForStep(step){
  // reduce confusion: show needed + a few distractors
  const allowSet = new Set();
  step.zones.forEach(z => z.accepts.forEach(id => allowSet.add(id)));

  const needed = ALL_ITEMS.filter(it => allowSet.has(it.id));

  // distractors: pick some items not used in this step
  const distractors = ALL_ITEMS
    .filter(it => !allowSet.has(it.id))
    .filter(it => ["enzyme","substrate","energy"].includes(it.kind))
    .slice(0, 6);

  const list = [...needed, ...distractors];

  els.items.innerHTML = "";
  list.forEach(it => {
    const div = document.createElement("div");
    div.className = "item";
    div.draggable = true;
    div.dataset.id = it.id;
    div.dataset.kind = it.kind;
    div.innerHTML = `<b>${it.label}</b><span>${it.desc}</span>`;
    div.addEventListener("dragstart", onDragStart);
    div.addEventListener("dragend", onDragEnd);
    els.items.appendChild(div);
  });
}

function renderZones(step){
  els.zones.innerHTML = "";
  step.zones.forEach(z => {
    const zone = document.createElement("div");
    zone.className = "zone";
    zone.dataset.zoneId = z.id;
    zone.dataset.accepts = z.accepts.join(",");
    zone.innerHTML = `
      <div><b>${z.title}</b> <small>(${z.hint})</small></div>
      <div class="slot" aria-label="${z.title} —Å–ª–æ—Ç"></div>
    `;
    zone.addEventListener("dragover", onDragOver);
    zone.addEventListener("drop", onDrop);
    els.zones.appendChild(zone);
  });
}

function setStageUI(step){
  els.stepBadge.textContent = `–ö–µ–∑–µ“£ ${step.id} / 6`;
  els.stepTitle.textContent = step.title;
  els.stepGoal.textContent = step.goal;
  els.stepTheory.innerHTML = `<b>“í—ã–ª—ã–º–∏ –Ω–µ–≥—ñ–∑:</b> ${step.theory}`;

  els.boardTitle.textContent = step.boardTitle;
  els.boardSubtitle.textContent = step.subtitle;

  // —Ñ–æ–Ω –∞—É—ã—Å—Ç—ã—Ä—É (–º—É–ª—å—Ç—è—à–Ω—ã–π)
  els.stageBg.className = "stageBg bg-" + step.id;

  els.equation.textContent = step.equation;
  els.equationTag.textContent = `–ö–µ–∑–µ“£ ${step.id}`;
  els.enzymeNote.textContent = step.enzymeNote;

  els.reactionBadge.textContent = "–ñ–∏–Ω–∞–ª–º–∞–¥—ã";
  els.reactionBadge.style.background = "rgba(47,111,237,.20)";
  els.reactionBadge.style.borderColor = "rgba(47,111,237,.30)";

  els.feedback.className = "msg";
  els.feedback.textContent = "–≠–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä–¥—ñ —Å“Ø–π—Ä–µ–ø –∞–ø–∞—Ä—ã–ø, —Ä–µ–∞–∫—Ü–∏—è–Ω—ã “õ“±—Ä–∞—Å—Ç—ã—Ä—ã“£—ã–∑. –î–∞–π—ã–Ω –±–æ–ª—Å–∞“£—ã–∑ ‚Äî ¬´–¢–µ–∫—Å–µ—Ä—É¬ª.";
}

function resetZonesState(){
  [...els.zones.querySelectorAll(".zone")].forEach(z => {
    z.classList.remove("ok","bad");
    const slot = z.querySelector(".slot");
    slot.innerHTML = "";
  });
}

function updateKPIs(){
  els.okCount.textContent = String(okCount);
  els.badCount.textContent = String(badCount);
  els.score.textContent = String(score);
}

let draggedEl = null;

function onDragStart(e){
  draggedEl = e.currentTarget;
  e.dataTransfer.setData("text/plain", draggedEl.dataset.id);
  setTimeout(()=> draggedEl.classList.add("ghost"), 0);
}
function onDragEnd(){
  if(draggedEl) draggedEl.classList.remove("ghost");
  draggedEl = null;
}
function onDragOver(e){ e.preventDefault(); }

function onDrop(e){
  e.preventDefault();
  const zone = e.currentTarget;
  const slot = zone.querySelector(".slot");
  const id = e.dataTransfer.getData("text/plain");
  if(!id) return;

  // prevent duplicates
  if([...slot.querySelectorAll(".item")].some(x => x.dataset.id === id)) return;

  // clone visual item into slot
  const src = [...els.items.querySelectorAll(".item")].find(x => x.dataset.id === id);
  if(!src) return;

  const clone = src.cloneNode(true);
  clone.draggable = true;
  clone.classList.remove("ghost");
  clone.classList.add("pop");
  clone.addEventListener("dragstart", onDragStart);
  clone.addEventListener("dragend", onDragEnd);

  // click-to-remove
  clone.title = "”®—à—ñ—Ä—É “Ø—à—ñ–Ω –±–∞—Å—ã“£—ã–∑";
  clone.addEventListener("click", ()=> clone.remove());

  slot.appendChild(clone);
  zone.classList.remove("ok","bad");
}

function checkStep(){
  const step = STEPS[stepIndex];
  let allOk = true;
  let stepOk = 0;
  let stepBad = 0;

  [...els.zones.querySelectorAll(".zone")].forEach(zone => {
    const accepts = (zone.dataset.accepts || "").split(",").filter(Boolean);
    const placed = [...zone.querySelectorAll(".slot .item")].map(it => it.dataset.id);

    // must include >=1 acceptable item; and all placed items must be acceptable
    const hasAnyAccept = placed.some(id => accepts.includes(id));
    const allPlacedOk = placed.every(id => accepts.includes(id));

    if(hasAnyAccept && allPlacedOk){
      zone.classList.remove("bad");
      zone.classList.add("ok");
      stepOk += 1;
    } else {
      zone.classList.remove("ok");
      zone.classList.add("bad");
      allOk = false;
      stepBad += 1;
    }
  });

  okCount += stepOk;
  badCount += stepBad;

  if(allOk){
    score += 10;
    els.feedback.className = "msg ok";
    els.feedback.innerHTML = `<b style="color:var(--ok)">–î“±—Ä—ã—Å!</b> –ö–µ–∑–µ“£ ${step.id} —Ç–∞–ª–∞–ø—Ç–∞—Ä—ã –æ—Ä—ã–Ω–¥–∞–ª–¥—ã. ¬´–ö–µ–ª–µ—Å—ñ –∫–µ–∑–µ“£¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—ã“£—ã–∑.`;
    els.reactionBadge.textContent = "–î“±—Ä—ã—Å “õ“±—Ä–∞—Å—Ç—ã—Ä—ã–ª–¥—ã";
    els.reactionBadge.style.background = "rgba(31,143,74,.18)";
    els.reactionBadge.style.borderColor = "rgba(31,143,74,.35)";
  } else {
    score = Math.max(0, score - 2);
    els.feedback.className = "msg bad";
    els.feedback.innerHTML = `<b style="color:var(--bad)">“ö–∞—Ç–µ –±–∞—Ä.</b> “ö—ã–∑—ã–ª –∞–π–º–∞“õ—Ç–∞—Ä–¥—ã —Ç“Ø–∑–µ—Ç—ñ“£—ñ–∑: –¥“±—Ä—ã—Å —ç–ª–µ–º–µ–Ω—Ç—Ç–µ—Ä–¥—ñ “õ–æ–π—ã–ø, –∞—Ä—Ç—ã“õ—Ç–∞—Ä—ã–Ω ”©—à—ñ—Ä—ñ“£—ñ–∑ (—ç–ª–µ–º–µ–Ω—Ç—Ç—ñ –±–∞—Å—ã–ø ”©—à—ñ—Ä—É–≥–µ –±–æ–ª–∞–¥—ã).`;
    els.reactionBadge.textContent = "–¢–æ–ª—ã“õ –µ–º–µ—Å";
    els.reactionBadge.style.background = "rgba(192,53,53,.16)";
    els.reactionBadge.style.borderColor = "rgba(192,53,53,.35)";
  }

  updateKPIs();
}

function goNext(){
  if(stepIndex < STEPS.length - 1){
    stepIndex += 1;
    loadStep(stepIndex);
  } else {
    els.feedback.className = "msg ok";
    els.feedback.innerHTML = `<b style="color:var(--ok)">–ë—ñ—Ç—Ç—ñ!</b> –°—ñ–∑ –≥–ª–∏–∫–æ–≥–µ–Ω–µ–∑–¥—ñ“£ –Ω–µ–≥—ñ–∑–≥—ñ —Å–∞—Ç—ã–ª–∞—Ä—ã–Ω –∞—è“õ—Ç–∞–¥—ã“£—ã–∑. “∞–ø–∞–π: <b>${score}</b>.`;
  }
}

function resetAll(){
  stepIndex = 0;
  okCount = 0;
  badCount = 0;
  score = 0;
  updateKPIs();
  loadStep(stepIndex);
}

function loadStep(idx){
  const step = STEPS[idx];
  setStageUI(step);
  renderZones(step);
  renderItemsForStep(step);
  resetZonesState();
}

btnCheck.addEventListener("click", checkStep);
btnNext.addEventListener("click", goNext);
btnReset.addEventListener("click", resetAll);

// init
updateKPIs();
loadStep(stepIndex);
</script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>